{"version":3,"sources":["webpack:///./src/app/ud-element.jsx","webpack:///./node_modules/react-interval/lib/index.js","webpack:///./node_modules/react-interval/lib/Component.js"],"names":["UdElement","state","hidden","str","substring","length","regexGuid","test","isGuid","props","id","pubSubToken","PubSub","subscribe","onIncomingEvent","bind","eventName","event","type","tag","inputComp","$","parentElement","remove","setState","unsubscribe","React","Component","UDElementContent","content","attributes","events","loading","hasError","errorMessage","fetchGet","data","error","message","info","hasCallback","loadData","js","getScript","getApiPath","e","val","target","value","checked","i","publish","eventId","eventData","preventUnregister","fetchPost","requestId","concat","elements","Array","refs","element","selectedOptions","item","isNaN","push","JSON","stringify","renderComponent","componentName","history","children","map","x","onUserEvent","onChange","onTextboxChanged","onCheckboxChanged","ref","key","createElement","refreshInterval","autoRefresh"],"mappings":"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","file":"ud-element.a5263d0d4e6d77a7859c.bundle.js","sourcesContent":["import React from 'react';\r\nimport renderComponent from './services/render-service.jsx';\r\nimport PubSub from 'pubsub-js';\r\nimport { fetchGet, fetchPost } from './services/fetch-service.jsx';\r\nimport { getApiPath } from 'config';\r\nimport ReactInterval from 'react-interval';\r\nimport $ from 'jquery';\r\nimport LazyElement from './basics/lazy-element.jsx';\r\n\r\nexport default class UdElement extends React.Component {\r\n    constructor() {\r\n        super();\r\n\r\n        this.state = {\r\n            hidden: false\r\n        }\r\n    }\r\n\r\n    isGuid(str) {\r\n        if (str == null) { return false }\r\n\r\n        if (str[0] === \"{\") {\r\n            str = str.substring(1, str.length - 1);\r\n        }\r\n        var regexGuid = /^(\\{){0,1}[0-9a-fA-F]{8}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{12}(\\}){0,1}$/gi;\r\n        var regexGuid = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r\n        return regexGuid.test(str);\r\n    }\r\n\r\n    componentWillMount() {\r\n        if (!this.isGuid(this.props.id)) {\r\n            this.pubSubToken = PubSub.subscribe(this.props.id, this.onIncomingEvent.bind(this));\r\n        }\r\n    }\r\n\r\n    onIncomingEvent(eventName, event) {\r\n        if (event.type === \"removeElement\") {\r\n            if (this.props.tag == 'input') {\r\n                let inputComp = $(`#${this.props.id}`)\r\n                inputComp[0].parentElement.remove()\r\n            }\r\n            this.setState({\r\n                hidden: true\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.state.hidden && this.pubSubToken != null) {\r\n            PubSub.unsubscribe(this.pubSubToken);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.pubSubToken != null) {\r\n            PubSub.unsubscribe(this.pubSubToken);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hidden) {\r\n            return null;\r\n        }\r\n        return <UDElementContent {...this.props} />\r\n    }\r\n}\r\n\r\nclass UDElementContent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            content: props.content,\r\n            tag: props.tag,\r\n            attributes: props.attributes,\r\n            events: props.events,\r\n            loading: true,\r\n            hasError: false,\r\n            errorMessage: ''\r\n        }\r\n    }\r\n\r\n    loadData() {\r\n        fetchGet(\"/api/internal/component/element/\" + this.props.id, function (data) {\r\n            if (data.error) {\r\n                this.setState({\r\n                    hasError: true,\r\n                    errorMessage: data.error.message\r\n                })\r\n                return;\r\n            }\r\n\r\n            this.setState({\r\n                content: data,\r\n                loading: false\r\n            });\r\n        }.bind(this));\r\n    }\r\n\r\n    componentDidCatch(error, info) {\r\n        this.setState({ hasError: true, errorMessage: error.message });\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.pubSubToken = PubSub.subscribe(this.props.id, this.onIncomingEvent.bind(this));\r\n        if (this.props.hasCallback) {\r\n            this.loadData();\r\n        }\r\n        else {\r\n            if (this.props.js) {\r\n                $.getScript(getApiPath() + \"/api/internal/javascript/\" + this.props.js, function () {\r\n                    this.setState({\r\n                        loading: false\r\n                    })\r\n                }.bind(this));\r\n            }\r\n            else {\r\n                this.setState({\r\n                    loading: false\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    onTextboxChanged(e) {\r\n        var val = e.target.value;\r\n        this.state.attributes.value = val;\r\n\r\n        this.setState({\r\n            attributes: this.state.attributes\r\n        });\r\n    }\r\n\r\n    onCheckboxChanged(e) {\r\n        var val = e.target.value;\r\n        val = e.target.checked;\r\n        this.state.attributes.checked = val;\r\n\r\n        this.setState({\r\n            attributes: this.state.attributes\r\n        });\r\n\r\n        for (var i = 0; i < this.state.events.length; i++) {\r\n            if (this.state.events[i].event === 'onChange') {\r\n\r\n                var event = this.state.events[i];\r\n\r\n                PubSub.publish('element-event', {\r\n                    type: \"clientEvent\",\r\n                    eventId: event.id,\r\n                    eventName: 'onChange',\r\n                    eventData: val\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (!this.props.preventUnregister) {\r\n            if (this.state.events != null) {\r\n                for (var i = 0; i < this.state.events.length; i++) {\r\n                    PubSub.publish('element-event', {\r\n                        type: \"unregisterEvent\",\r\n                        eventId: this.state.events[i].id\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (this.props.hasCallback) {\r\n                PubSub.publish('element-event', {\r\n                    type: \"unregisterEvent\",\r\n                    eventId: this.props.id\r\n                });\r\n            }\r\n        }\r\n\r\n        PubSub.unsubscribe(this.pubSubToken);\r\n    }\r\n\r\n    onIncomingEvent(eventName, event) {\r\n        if (event.type === \"setState\") {\r\n            this.setState(event.state);\r\n        }\r\n        else if (event.type === \"requestState\") {\r\n            fetchPost(`/api/internal/component/element/sessionState/${event.requestId}`, this.state);\r\n        } else if (event.type === \"removeElement\") {\r\n\r\n            this.setState({\r\n                hidden: true\r\n            })\r\n        } else if (event.type === \"addElement\") {\r\n\r\n            var content = this.state.content;\r\n            if (content == null) {\r\n                content = []\r\n            }\r\n\r\n            content = content.concat(event.elements);\r\n\r\n            this.setState({\r\n                content\r\n            })\r\n        } else if (event.type === \"clearElement\") {\r\n            this.setState({\r\n                content: null\r\n            })\r\n        } else if (event.type === \"syncElement\") {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    onUserEvent(event, e) {\r\n        var eventName = null;\r\n        var val = null;\r\n        if (this.state.tag === 'select') {\r\n\r\n            val = new Array();\r\n\r\n            if (this.refs.element.selectedOptions) {\r\n                for (var item in this.refs.element.selectedOptions) {\r\n                    if (isNaN(item)) continue;\r\n                    var value = this.refs.element.selectedOptions[item].value;\r\n                    val.push(value);\r\n                }\r\n            }\r\n            else {\r\n                val.push(this.refs.element.value);\r\n            }\r\n\r\n            if (val.length === 1) {\r\n                val = val[0]\r\n            }\r\n            else {\r\n                val = JSON.stringify(val);\r\n            }\r\n\r\n            for (var i = 0; i < this.state.events.length; i++) {\r\n                if (this.state.events[i].event === 'onChange') {\r\n                    event = this.state.events[i];\r\n                }\r\n            }\r\n            eventName = 'onChange'\r\n        }\r\n        else {\r\n            eventName = event.event;\r\n            val = e.target.value;\r\n            if (val != null && val.checked != null) {\r\n                val = e.target.checked;\r\n            }\r\n        }\r\n\r\n        this.state.attributes.value = val;\r\n        this.setState(this.state);\r\n\r\n        PubSub.publish('element-event', {\r\n            type: \"clientEvent\",\r\n            eventId: event.id,\r\n            eventName: eventName,\r\n            eventData: val\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hidden) {\r\n            return null;\r\n        }\r\n\r\n        if (this.state.hasError) {\r\n            return <LazyElement component={{\r\n                type: 'error',\r\n                message: this.state.errorMessage\r\n            }} />\r\n        }\r\n\r\n        if (this.props.error) {\r\n            return <LazyElement component={{\r\n                type: 'error',\r\n                message: this.state.errorMessage\r\n            }} />\r\n        }\r\n\r\n        if (this.state.loading) {\r\n            return <div></div>\r\n        }\r\n\r\n        if (this.props.js) {\r\n            return renderComponent({\r\n                type: this.props.componentName,\r\n                ...this.props.props\r\n            }, this.props.history)\r\n        }\r\n\r\n        var children = null;\r\n\r\n        if (this.state.content && this.state.content.map) {\r\n            children = this.state.content.map(function (x) {\r\n                if (x.type != null) {\r\n                    return renderComponent(x, this.props.history);\r\n                }\r\n                return x;\r\n            }.bind(this));\r\n        }\r\n        else if (this.state.content) {\r\n            children = this.state.content;\r\n        }\r\n\r\n        var attributes = this.state.attributes;\r\n\r\n        if (attributes == null) {\r\n            attributes = {}\r\n        }\r\n\r\n        if (attributes.id == null) {\r\n            attributes.id = this.props.id;\r\n        }\r\n\r\n        if (this.state.events != null && this.state.events.map) {\r\n            this.state.events.map(function (event) {\r\n                attributes[event.event] = function (e) {\r\n                    this.onUserEvent(event, e);\r\n                }.bind(this);\r\n                return null;\r\n            }.bind(this));\r\n        }\r\n\r\n        if (this.state.tag === \"input\") {\r\n            if (attributes.type === \"text\" || attributes.type === \"password\") {\r\n                attributes.onChange = this.onTextboxChanged.bind(this);\r\n            }\r\n\r\n            if (attributes.type === \"checkbox\") {\r\n                attributes.onChange = this.onCheckboxChanged.bind(this);\r\n            }\r\n        }\r\n\r\n        if (this.state.tag === \"textarea\") {\r\n            attributes.onChange = this.onTextboxChanged.bind(this);\r\n        }\r\n\r\n        attributes.ref = 'element';\r\n        attributes.key = this.props.key;\r\n\r\n        this.element = React.createElement(this.state.tag, attributes, children);\r\n\r\n        return [this.element,\r\n        <ReactInterval timeout={this.props.refreshInterval * 1000} enabled={this.props.autoRefresh} callback={this.loadData.bind(this)} />];\r\n    }\r\n}\r\n","\"use strict\";\n\nvar _require = require('./Component'),\n    ReactInterval = _require.ReactInterval;\n\nReactInterval.ReactInterval = ReactInterval;\nmodule.exports = ReactInterval;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReactInterval = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar ReactInterval =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ReactInterval, _React$Component);\n\n  function ReactInterval() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ReactInterval);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ReactInterval)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"callback\", function () {\n      if (_this.timer) {\n        var callback = _this.props.callback;\n        callback();\n\n        _this.start();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"start\", function () {\n      _this.stop();\n\n      var timeout = _this.props.timeout;\n      _this.timer = setTimeout(_this.callback, timeout);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stop\", function () {\n      clearTimeout(_this.timer);\n      _this.timer = null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"render\", function () {\n      return false;\n    });\n\n    return _this;\n  }\n\n  _createClass(ReactInterval, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var enabled = this.props.enabled;\n\n      if (enabled) {\n        this.start();\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(_ref) {\n      var timeout = _ref.timeout,\n          callback = _ref.callback,\n          enabled = _ref.enabled;\n      var _this$props = this.props,\n          timeout1 = _this$props.timeout,\n          callback1 = _this$props.callback,\n          enabled1 = _this$props.enabled;\n      return timeout1 !== timeout || callback1 !== callback || enabled1 !== enabled;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_ref2) {\n      var enabled = _ref2.enabled,\n          timeout = _ref2.timeout;\n      var _this$props2 = this.props,\n          timeout1 = _this$props2.timeout,\n          enabled1 = _this$props2.enabled;\n\n      if (enabled1 !== enabled || timeout1 !== timeout) {\n        if (enabled1) {\n          this.start();\n        } else {\n          this.stop();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stop();\n    }\n  }]);\n\n  return ReactInterval;\n}(_react[\"default\"].Component);\n\nexports.ReactInterval = ReactInterval;\n\n_defineProperty(ReactInterval, \"defaultProps\", {\n  enabled: false,\n  timeout: 1000\n});"],"sourceRoot":""}